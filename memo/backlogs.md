# Backlogs

## Feature

- [x] 同じサイトのダウンロードを行う際、更新があったファイルだけダウンロードをする(ドキュメントごとにsqliteのDBを用意し、ファイルごとのダウンロード時のタイムスタンプを記録して、ダウンロード時にタイムスタンプをチェックしてダウンロードが必要なファイルだけダウンロードして更新する)
- [x] 検索機能の実装(選択した文字をWindows/Linux:Ctrl+F, Mac:Cmd+Fで実行)
- [x] LLM解析機能の実装(詳細はmemo/first_proposal.md 参照)
- [x] 縦書き機能の実装(機能有効/無効は設定画面で設定)
- [x] フォント切り替え機能の実装(設定画面で設定)
- [x] 検索機能の強化:検索結果を一覧から選択したとき、
  - [x] 一覧をファイル名順にソートするべき
  - [x] 中央のファイルに検索対象の文字列をハイライトするべき
  - [x] 選択した行が見えるようにジャンプするべき
- [x] 保存時のフォルダ名をタイトルではなくIDにする。タイトルは別途管理
- [x] ルビ表示対応
- [x] 小説フォルダ削除機能を追加
- [x] 選択中の小説タイトルを表示する
- [x] すでにダウンロード済みのファイルは再ダウンロードしないようにする
- [ ] ダークモードの追加
- [x] 行間調整機能の追加
- [ ] 挿絵生成機能の追加
- [x] 検索・LLM要約の右辺カラムの非表示
- [x] 縦書き表示でのスワイプ操作による画面切り替え
- [x] 起動直後の画面サイズが小さい。画面いっぱいに広がっていてほしい
- [ ] 独自アイコンの設定
- [ ] ブックマーク機能

## Bugs

- [x] 縦書きモードで範囲選択ができない。
  縦書きモードでは VerticalTextPage が Wrap の中に1文字ずつ個別の Text ウィジェットとして配置している。
  ウィジェットは選択機能を持たないため、範囲選択ができない
- [x] 特定のファイルを縦書き表示すると、左辺カラムにテキストがはみ出る
/Users/endo5501/Library/Containers/com.endo5501.novelViewer/Data/Documents/NovelViewer/narou_n8281jr/088_【88 ここまでのまとめ】.txt
- [x] 縦書き表示時、ルビの文字は90度回転していない
- [ ] 縦書き表示時、"っ"や"ぁ"などの小文字の位置が下側にあるのは違和感がある
参考：<https://crd.ndl.go.jp/reference/entry/index.php?page=ref_view&id=1000038524> <https://ameblo.jp/ikuyokaiyu/entry-12672819156.html>
- [x] なろう小説で複数のページを持つ長編小説はダウンロードできるが、1ページのみの短編小説はダウンロードできない. 
例:<https://ncode.syosetu.com/n5983ls/>
- [ ] カクヨムで、全編のダウンロードが出来ない. 
例:<https://kakuyomu.jp/works/16818792437310915979>
- [x] 縦書き表示時、`。`や`、`などの句読点が行末に来たときでも構わずに改行してしまう
参考：<https://www.lowcost-print.com/column/%E3%80%90%E7%A6%81%E5%89%87%E5%87%A6%E7%90%86%E3%80%91%E8%A1%8C%E9%A0%AD%E3%81%AE%E5%8F%A5%E8%AA%AD%E7%82%B9%E3%82%92%E8%A1%8C%E6%9C%AB%E3%81%AB%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/> <https://note.com/ichi_branch/n/n51cf1a9ab4a7>
- [x] 小説フォルダ内でダウンロードすると、フォルダ内に小説が保存される
- [x] 長編小説が複数ページに分かれている場合、うまく対処できない

## Refactor
